# Technical FAQ

### テクニカルFAQ

**これは私のトレーニングプロセスにどのように影響しますか？**

トレーニングスクリプトから`wandb.init()`が呼び出されると、API呼び出しが行われ、サーバー上に実行オブジェクトが作成されます。メトリックをストリーミング・収集するために新しいプロセスが開始され、それによってすべてのスレッドとロジックがプライマリプロセスから除外されます。スクリプトは正常に実行され、ローカルファイルに書き込みますが、別のプロセスがシステムメトリックとともにサーバーにストリーミングします。このストリーミングをオフにするには、トレーニングディレクトリでwandb offにするか、**WANDB\_MODE**環境変数を「dryrun」に設定します。

###  **wandbがクラッシュすると、トレーニングの実行がクラッシュする可能性がありますか？**

私たちにとって、あなたのトレーニングの実行を妨害しないことは非常に重要です。wandbを別のプロセスで実行しますので、何らかの理由でクラッシュした場合でもあなたのトレーニングは引き続き実行されます。もしインターネットが切断されてもwandbはwandb.comへのデータ送信を再試行し続けます。

**Wandbによって私のトレーニングが遅くなることはありますか？**

Wandbを通常使用する場合、トレーニングパフォーマンスへの影響はごくわずかです。wandbの通常の使用は、各ステップのログ記録は1秒に1回未満であり、数メガバイトに満たないサイズのデータです。Wandbは別のプロセスで実行され、関数呼び出しはブロックされないため、ネットワークが一時的にダウンしたり、ディスク上で断続的な読み取り/書き込みの問題が発生したりしても、パフォーマンスに影響はありません。大量データをすばやくログに記録することが可能ですが、そうすれば、ディスクI/Oの問題が発生する可能性があります。ご不明な点がございましたら、お気軽にお問い合わせください。

### **wandbをオフラインで実行できますか？**

もしオフラインマシンでトレーニングしていて、後でその結果をサーバーにアップロードしたいなら、それが可能です！

1. 環境変数WANDB\_MODE=dryrunを設定して、メトリックをローカルに保存します。インターネットは必要ありません
2. 準備ができたら、ディレクトリでwandb initを実行して、プロジェクト名を設定します。
3. `wandb sync YOUR_RUN_DIRECTORY`を実行して、メトリックをクラウドサービスにプッシュし、ホストされているWebアプリで結果を確認します。

### **ツールはトレーニングデータを追跡または保存していますか？**

SHAまたはその他のユニーク識別子を`wandb.config.update(...)`に渡して、データセットをトレーニングの実行に関連付けることができます。`wandb.save`がローカルファイル名で呼び出されない限り、W＆Bはデータを保存しません。

### **システムメトリックはどのくらいの頻度で収集されますか？**

デフォルトでは、メトリックは2秒ごとに収集されますが、平均では30秒ごとに収集されます。高解像度のメトリクスが必要な場合は、[contact@wandb.com](mailto:contact@wandb.com)までEメールでお問い合わせください。

### **これが使えるのはPythonだけですか？**

現在、ライブラリはPython2.7以降および3.6以降のプロジェクトでのみ機能します。このアーキテクチャは、他言語との統合が簡単です。他言語表示が必要な場合は、[contact@wandb.com](mailto:contact@wandb.com)までご連絡ください。

### **コードやデータセット例ではなく、メトリックのみをログに記録できますか？**

データセット例

デフォルトでは、データセット例はログに記録されません。この機能を明示的にオンにすると、Webインターフェイスで予測例を確認できます。

**コードロギング**

コードロギングをオフにする方法は2つあります。

1. **WANDB\_DISABLE\_CODE**をtrueにすると、すべてのコードトラッキングがオフになります。git SHAまたはdiffパッチは取得しません。
2. **WANDB\_IGNORE\_GLOBS**を**\*.patch**に設定すると、サーバーへのdiffパッチの同期がオフになります。それはまだローカルにあり、[wandb restore](https://app.gitbook.com/@weights-and-biases/s/docs/~/drafts/-MNTo635YwwyToLxk-CQ/v/japanese/library/cli#restore-the-state-of-your-code)コマンドで適用させることができます。

### **ロギングによって私のトレーニングはブロックされますか？**

「ネットワークに依存せずに、結果をwandbサーバーに送信してローカル操作を続行したいです。」

**wandb.log**を呼び出すと、ローカルファイルに行が書き込まれます。これによってネットワーク呼び出しはブロックされません。wandb.initを呼び出すと、同一マシン上で新規プロセスが起動します。これはファイルシステムの変更をリッスンし、あなたのトレーニングプロセスとは非同期に弊社Webサービスと通信します。

### **平滑化アルゴリズムにはどの式を使用しますか？**

TensorBoardと同じ指数移動平均式を使用します。次のリンクからその説明を見つけることができます。[https://stackoverflow.com/questions/42281844/what-is-the-mathematics-behind-the-smoothing-parameter-in-tensorboards-scalar](https://stackoverflow.com/questions/42281844/what-is-the-mathematics-behind-the-smoothing-parameter-in-tensorboards-scalar)

### **W＆BはTensorBoardとどう違いますか？**

私たちはTensorBoardに関わった人たちとの協力を望んでおり、[TensorBoardとの統合](https://docs.wandb.ai/v/japanese/integrations/tensorboard)を成し遂げています！私たちは、実験トラッキングツールをより良くするために努力しています。共同創設者がW＆Bの取り組みを始めたとき、彼らはOpenAIで不満を持っていたTensorBoardユーザーへ、ツールを構築しようとしていました。以下は、当社が改善に力を入れた項目です。

1. **モデルの再現**：Weights＆Biasesは、実験や調査、それに後で行うモデルの再現にも適しています。メトリックだけでなく、ハイパーパラメータとコードのバージョンもキャプチャします。モデルのチェックポイントも保存でき、プロジェクトの再現性が高まります。
2. **モデルの再現**：Weights＆Biasesは、実験や調査、それに後で行うモデルの再現にも適しています。メトリックだけでなく、ハイパーパラメータとコードのバージョンもキャプチャします。モデルのチェックポイントも保存でき、プロジェクトの再現性が高まります。
3. **高速で柔軟な統合**：5分でプロジェクトにW＆Bを追加できます。無料のオープンソースPythonパッケージをインストールし、コードに数行追加するだけで、モデルを実行するたびに、メトリックとレコードのすばらしいログ記録が得られます。
4. **持続的で一元化されたダッシュボード**：ローカルマシン、ラボクラスター、クラウド内のスポットインスタンスなど、どこでモデルをトレーニングしても、一元化された同じダッシュボードを提供します。異なるマシンからTensorBoardファイルをコピーしたり整理したりする時間は必要ありません。
5. **強力なテーブル**：さまざまなモデルの結果を検索したり、フィルタリング・並べ替え・グループ化が可能。何千ものモデルバージョンを調べて、さまざまなタスクに最適なモデルを簡単に見つけられます。一方、TensorBoardは、大規模なプロジェクトでうまく機能するようには構築されていません。
6. **コラボレーションのためのツール**：W＆Bを使用して、複雑な機械学習プロジェクトをまとめることができます。W＆Bへのリンク共有は簡単で、プライベートチーム全員が共有プロジェクトに結果を送信できます。また、レポートを介したコラボレーションもサポートしています。インタラクティブな視覚化を追加し、マークダウンで作業を説明します。これは、作業ログを保持したり、調査結果を上司と共有したり、調査結果をラボに提示したりできる優れた方法です。[無料の個人アカウントを始めましょう→](http://app.wandb.ai/)[\[KinoTrans1\]](applewebdata://4037AA20-4E42-4690-B081-C7052CC97D9A#_msocom_1) 

**トレーニングコードに実行名をコンフィグするにはどうすればよいですか？**

 `wandb.init`を呼び出すときは、トレーニングスクリプトの先頭で、`wandb.init(name="my awesome run")`のような実験名を渡します。

### **スクリプトでランダムな実行名を取得するにはどうすればよいですか？**

`wandb.run.save（）`を呼び出してから、`wandb.run.name`で名前を取得します。

### **anacondaパッケージはありますか？**

anacondaパッケージはありませんが、以下を使用してwandbをインストールできます。

```text
conda activate myenv
pip install wandb
```

 このインストールで問題が発生した場合は、お知らせください。この[パッケージ管理に関するAnacondaドキ](https://docs.conda.io/projects/conda/en/latest/user-guide/tasks/manage-pkgs.html)ュメントには、助けになるガイダンスがあります。

**Wandbによるターミナルまたはjupyterノートブック出力への書き込みを停止するにはどうすればよいですか？**

環境変数[WANDB\_SILENT](https://app.gitbook.com/@weights-and-biases/s/docs/~/drafts/-MNTo635YwwyToLxk-CQ/v/japanese/library/environment-variables)を設定します。

ノートブックの場合：

```text
%env WANDB_SILENT true
```

Pythonスクリプトの場合：

```text
os.environ["WANDB_SILENT"] = "true"
```

### **wandbでジョブを強制終了するにはどうすればよいですか？**

キーボードのctrl+Dを押して、wandbでインストルメントされたスクリプトを停止します。

###  **ネットワークの問題に対処するにはどうすればよいですか？**

SSLまたはネットワークで、`wandb: Network error (ConnectionError), entering retry loop`のようなエラーが発生している場合、この問題を解決するために、いくつかのアプローチをお試しください。

1. SSL証明書をアップグレードします。Ubuntuサーバーでスクリプトを実行している場合は、`update-ca-certificates`を実行します。セキュリティの脆弱性の問題で、有効なSSL証明書がないとトレーニングログを同期できません。
2. ネットワークが不安定な場合は、[オフラインモード](https://docs.wandb.com/resources/technical-faq#can-i-run-wandb-offline)でトレーニングを実行し、インターネットにアクセスできるマシンからファイルを同期します。
3. ​[W＆B Local](https://app.gitbook.com/@weights-and-biases/s/docs/~/drafts/-MNTo635YwwyToLxk-CQ/v/japanese/self-hosted/local)を実行してみてください。これは、マシン上で動作し、ファイルをクラウドサーバーに同期しません。

**SSL CERTIFICATE\_VERIFY\_FAILED**：このエラーは、あなたの会社のファイアウォールが原因である可能性があります。ローカルCAを設定して、次を使用してください。`export REQUESTS_CA_BUNDLE=/etc/ssl/certs/ca-certificates.crt`

### **モデルのトレーニング中にインターネット接続が失われた場合はどうなりますか？**

ライブラリがインターネットに接続できない場合、ライブラリは再試行ループに入り、ネットワークが復元されるまでメトリックのストリーミングを試み続けます。この間もプログラムは実行し続けられます。

インターネットを使用せずにマシンで実行する必要がある場合は、**WANDB\_MODE=dryrun**を設定すると、メトリックをローカルでハードドライブに保存するだけにできます。後で**wandb sync DIRECTORY**を呼び出して、データをサーバーにストリーミングできます。

**2つの異なる時間スケールでメトリックをログに記録できますか？（例：バッチごとのトレーニング精度とエポックごとの検証精度をログに記録）**

 はい、できます。これを行うには、複数のメトリックをログに記録してから、それらにx軸の値を設定します。したがって、あるステップではwandb.log\({'train\_accuracy': 0.9, 'batch': 200}\)を呼び出し、別のステップではwandb.log\({'val\_acuracy': 0.8, 'epoch': 4}\)を呼び出すことができます。

\*\*\*\*

### **最終評価の精度など、時間の経過とともに変化しないメトリックをログに記録するにはどうすればよいですか？**

wandb.log（{'final\_accuracy': 0.9}）を使用すると、問題なく動作します。デフォルトでは、wandb.log（{'final\_accuracy'}）が、実行テーブルに表示される値wandb.settings\['final\_accuracy'\]を更新します。

### **実行が完了した後、追加のメトリックをログに記録するにはどうすればよいですか？**

これはいくつかの方法があります。

複雑なワークフローの場合は、複数の実行を使用し、[wandb.init](https://docs.wandb.ai/v/japanese/library/init)のグループパラメータを一意の値に設定することをおすすめします。これは単一の実験の一部として実行するすべてのプロセスで設定します。[実行テーブル](https://docs.wandb.ai/app/pages/run-page)[\[KinoTrans2\]](applewebdata://4037AA20-4E42-4690-B081-C7052CC97D9A#_msocom_2) は、このグループIDによってテーブルを自動的にグループ化し、期待通りに視覚化できます。これにより、個々のプロセスの結果がすべて一か所に記録されるため、複数の実験とトレーニングを実行できます。

より単純なワークフローでは、resume=Trueおよびid=UNIQUE\_IDを指定してwandb.initを呼び出し、後で同じid=UNIQUE\_IDを指定してwandb.initを呼び出すことができます。次に、[wandb.log](https://docs.wandb.ai/v/japanese/library/log)またはwandb.summaryを使用して通常どおりログに記録すると、実行値が更新されます。

[API](https://docs.wandb.ai/library/public-api-guide#update-metrics-for-a-run-after-the-run-has-finished)[\[KinoTrans3\]](applewebdata://4037AA20-4E42-4690-B081-C7052CC97D9A#_msocom_3) を使用して、いつでも評価指標を追加できます。

 **.log（）と.summaryの違いは何ですか？**

これはいくつかの方法によって行われます。複雑なワークフローの場合は、複数の実行を使用し、[wandb.init](init.md)のグループパラメータを、単一の実験の一部として実行されるすべてのプロセスでユニークな値に設定することをお勧めします。実行テーブルは、グループIDによってテーブルを自動的にグループ化し、ビジュアライゼーションは期待どおりに動作します。これにより、個別のプロセスがすべての結果を1つの場所に記録するため、複数の実験とトレーニングを実行できます。より単純なワークフローの場合、resume=Trueおよびid=UNIQUE\_IDを指定してwandb.initを呼び出し、後で同じid=UNIQUE\_IDを指定してwandb.initを呼び出すことができます。次に、wandb.logまたはwandb.summaryを使用して通常どおりログに記録すると、実行値が更新されます。APIを使用して、いつでも評価指標を追加できます。

### **.log（）と.summaryの違いは何ですか？**

“summary\(集計値\)”はテーブルに表示される値であり、”log”は後でプロットするために保存されるすべての値です。

たとえば、精度が変わるたびにwandb.logを呼び出すことができます。通常は、.logを使用できます。wandb.log\(\)は、そのメトリックのsummary\(集計\)を手動で設定していなければ、デフォルトではsummaryの値も更新されます。

散布図と平行座標プロットもこのsummary値を使用しますが、折れ線グラフは.logで設定されたすべての値をプロットします。

なぜ両方が存在するかというと、集計を手動で設定したい場合があるからです。例えば、最後に記録された精度ではなく、最適な精度を集計に反映させたい場合などです。

### **gccのない環境にwandbのPythonライブラリをインストールするにはどうすればよいですか？**

`wandb`をインストールしようとして、このエラーが表示された場合：

```text
unable to execute 'gcc': No such file or directory
error: command 'gcc' failed with exit status 1
```

psutilは、事前構成済みのホイールから直接インストールできます。ここでPythonのバージョンとOSを見つけてください：[https://pywharf.github.io/pywharf-pkg-repo/psutil](https://pywharf.github.io/pywharf-pkg-repo/psutil)

例：LinuxのPython 3.8にpsutilをインストールする場合

```text
pip install https://github.com/pywharf/pywharf-pkg-repo/releases/download/psutil-5.7.0-cp38-cp38-manylinux2010_x86_64.whl/psutil-5.7.0-cp38-cp38-manylinux2010_x86_64.whl#sha256=adc36dabdff0b9a4c84821ef5ce45848f30b8a01a1d5806316e068b5fd669c6d
```

psutilがインストールされたら、`pip install wandb`でwandbをインストールできます。


# fastai v1

Note : cette documentation est pour fastai v1.  
__Si vous utilisez la version actuelle de fastai, référez-vous à la [page fastai](https://docs.wandb.ai/v/fr/integrations/fastai).

Pour les scripts qui utilisent fastai v1, nous avons une fonction de rappel qui enregistre automatiquement la topologie des modèles, les pertes, les métriques, les poids, les dégradés, les exemples de prédictions et le modèle le mieux entraîné.

```python
import wandb
from wandb.fastai import WandbCallback

wandb.init()

learn = cnn_learner(data,
                    model,
                    callback_fns=WandbCallback)
learn.fit(epochs)
```

Les données enregistrées requises sont configurables à travers le constructeur de fonction de rappel \(callback constructor\).

```python
from functools import partial

learn = cnn_learner(data, model, callback_fns=partial(WandbCallback, input_type='images'))
```

Il est également possible d’utiliser WandbCallback uniquement lors du début de l’entraînement. Dans ce cas, il doit être instancié.

```python
learn.fit(epochs, callbacks=WandbCallback(learn))
```

Des paramètres personnalisés peuvent aussi être définis à cette étape.

```python
learn.fit(epochs, callbacks=WandbCallback(learn, input_type='images'))
```

##  Exemple de code

Nous avons créé quelques exemples pour vous montrer comment fonctionne cette intégration :

**Fastai v1**

*  [Classifier les personnages des Simpsons ](https://github.com/borisdayma/simpsons-fastai): une démo simple pour retracer et comparer les modèles Fastai
* [Segmentation Sémantique avec](https://github.com/borisdayma/semantic-segmentation) Fastai : optimiser les réseaux neuronaux sur les voitures autonomes

## Options

La classe `WandbCallback()` prend en charge un certain nombre d’options :

<table>
  <thead>
    <tr>
      <th style="text-align:left">
        <p>Argument</p>
        <p>mot-clef</p>
      </th>
      <th style="text-align:left">Par d&#xE9;faut</th>
      <th style="text-align:left">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align:left">learn</td>
      <td style="text-align:left">N/A</td>
      <td style="text-align:left">l&#x2019;apprenant (learner) fast.ai &#xE0; accrocher (hook)</td>
    </tr>
    <tr>
      <td style="text-align:left">save_model</td>
      <td style="text-align:left">True</td>
      <td style="text-align:left">enregistre le mod&#xE8;le s&#x2019;il s&#x2019;est am&#xE9;lior&#xE9;
        &#xE0; chaque &#xE9;tape. Chargera aussi le meilleur mod&#xE8;le &#xE0;
        la fin de l&#x2019;entra&#xEE;nement.</td>
    </tr>
    <tr>
      <td style="text-align:left">mode</td>
      <td style="text-align:left">auto</td>
      <td style="text-align:left">&apos;min&apos;, &apos;max&apos;, ou &apos;auto&apos; : comment comparer
        les m&#xE9;triquesd&#x2019;entra&#xEE;nement sp&#xE9;cifi&#xE9;es dans
        monitor entre les &#xE9;tapes.</td>
    </tr>
    <tr>
      <td style="text-align:left">monitor</td>
      <td style="text-align:left">None</td>
      <td style="text-align:left">m&#xE9;trique d&#x2019;entra&#xEE;nement utilis&#xE9;e pour mesurer les
        performances pour sauvegarder le meilleur mod&#xE8;le. Par d&#xE9;faut,
        None induitla perte de validation.</td>
    </tr>
    <tr>
      <td style="text-align:left">log</td>
      <td style="text-align:left">gradients</td>
      <td style="text-align:left">&quot;gradients&quot;, &quot;parameters&quot;, &quot;all&quot;, ou Aucun
        (None). Les pertes et les m&#xE9;triques sont toujours enregistr&#xE9;es.</td>
    </tr>
    <tr>
      <td style="text-align:left">input_type</td>
      <td style="text-align:left">None</td>
      <td style="text-align:left">&quot;images&quot; ou Aucun (None). Utilis&#xE9; pour afficher les pr&#xE9;dictions
        d&#x2019;&#xE9;chantillon.</td>
    </tr>
    <tr>
      <td style="text-align:left">validation_data</td>
      <td style="text-align:left">None</td>
      <td style="text-align:left">donn&#xE9;es utilis&#xE9;es pour les exemples de pr&#xE9;dictions, si
        input_type est configur&#xE9;.</td>
    </tr>
    <tr>
      <td style="text-align:left">predictions</td>
      <td style="text-align:left">36</td>
      <td style="text-align:left">nombre de pr&#xE9;dictions &#xE0; effectuer si input_type est configur&#xE9;
        et que validation_data est param&#xE9;tr&#xE9; sur None (aucun).</td>
    </tr>
    <tr>
      <td style="text-align:left">seed</td>
      <td style="text-align:left">12345</td>
      <td style="text-align:left">initialise un g&#xE9;n&#xE9;rateur al&#xE9;atoire pour les exemples de
        pr&#xE9;dictions si input_type est configur&#xE9; et que validation_data
        est param&#xE9;tr&#xE9; sur None (aucun).</td>
    </tr>
  </tbody>
</table>


---
description: モデルのハイパーパラメータと出力メトリック間の関係を視覚化します
---

# Parameter Importance

このパネルは、どのハイパーパラメータが最良の予測因子であり、メトリックの望ましい値と高度に相関しているかを示します。

![](https://paper-attachments.dropbox.com/s_B78AACEDFC4B6CE0BF245AA5C54750B01173E5A39173E03BE6F3ACF776A01267_1578795733856_image.png)

This hyperparameter importance panel untangles the complicated interactions between highly correlated hyperparameters. In doing so, it helps you fine tune your hyperparameter searches by showing you which of your hyperparameters matter the most in terms of predicting model performance. **相関**は、ハイパーパラメータと選択したメトリック（この場合はval\_loss）の間の線形相関です。したがって、相関が高いということは、ハイパーパラメータの値が高い場合、メトリックの値も高くなることを意味します。その逆も同様です。相関関係は確認するのに最適な指標ですが、入力間の2次の相互作用をキャプチャできず、入力を大きく異なる範囲で比較するのが面倒になる可能性があります。したがって、ハイパーパラメータを入力として、メトリックをターゲット出力として実行ダムフォレストをトレーニングする**重要度**メトリックも計算し、実行ダムフォレストの特徴重要度値を報告します。この手法のアイデアは、[Fast.ai](http://fast.ai/)でハイパーパラメータ空間を探索するための実行ダムフォレスト機能の重要性の使用を開拓した[Jeremy Howard](https://twitter.com/jeremyphoward)氏との談話が契機となりました。この分析の背後にある動機について詳しく知るために、彼の驚異的な講義（およびこれらのメモ）を確認することを強くお勧めします。このハイパーパラメータ重要度パネルは、相関性の高いハイパーパラメータ間の複雑な相互作用を解き明かします。そうすることで、モデルのパフォーマンスを予測する上で最も重要なハイパーパラメータを表示することで、ハイパーパラメータ検索を微調整するのに役立ちます。

## ハイパーパラメータ重要度パネルの作成

 Weights＆Biasesプロジェクトに移動します。お持ちでない場合は、このプロジェクトをご利用いただけます。プロジェクトページで、\[**視覚化の追加**\]をクリックします。

![](https://paper-attachments.dropbox.com/s_B78AACEDFC4B6CE0BF245AA5C54750B01173E5A39173E03BE6F3ACF776A01267_1578795570241_image.png)



 次に、**パラメータ重要度**を選択します。プロジェクトに[Weights＆Biasesを統](https://docs.wandb.com/quickstart')合する以外に、新しいコードを記述する必要はありません。

![](https://paper-attachments.dropbox.com/s_B78AACEDFC4B6CE0BF245AA5C54750B01173E5A39173E03BE6F3ACF776A01267_1578795636072_image.png)

## ハイパーパラメータ重要度パネルの解釈

![](https://paper-attachments.dropbox.com/s_B78AACEDFC4B6CE0BF245AA5C54750B01173E5A39173E03BE6F3ACF776A01267_1578798509642_image.png)

 このパネルには、トレーニングスクリプトで[wandb.config](https://docs.wandb.com/library/python/config)オブジェクトに渡されたすべてのパラメーターが表示されます。次に、選択したモデルメトリック（この場合はval\_loss）に関して、これらの構成パラメーターの機能の重要性と相関関係を示します。

### Importance

T重要度

重要度の列には、選択したメトリックの予測に各ハイパーパラメータがどの程度役立ったかが表示されます。多数のハイパーパラメータを調整し、このプロットを使用して、さらに調査する価値のあるものに焦点を当てることから始めるシナリオを想像できます。その後のスイープは、最も重要なハイパーパラメータに制限できるため、より適切なモデルをより速く、より安価に見つけることができます。注：これらの重要性は、線形モデルではなくツリーベースのモデルを使用して計算します。前者は、カテゴリデータと正規化されていないデータの両方に対してより耐性があるためです。前述のパネルでは、エポック、learning\_rate、batch\_size、weight\_decayがかなり重要であることがわかります。次のステップとして、これらのハイパーパラメータのより細かい値を探索する別のスイープを実行する場合があります。興味深いことに、`learning_rate`と`batch_size`は重要でしたが、出力との相関性はあまり高くありませんでした。これは私たちに相関関係をもたらします。

### 相関関係

相関は、個々のハイパーパラメータとメトリック値の間の線形関係をキャプチャします。彼らは質問に答えます-ハイパーパラメータの使用、たとえばSGDオプティマイザと私のval\_lossの間には重要な関係があります（この場合の答えはイエスです）。相関値の範囲は-1から1で、正の値は正の線形相関を表し、負の値は負の線形相関を表し、値0は相関がないことを表します。一般に、いずれかの方向で0.7より大きい値は、強い相関関係を表します。

このグラフを使用して、メトリックとの相関が高い値をさらに調査するか（この場合、rmspropまたはnadamよりも確率的勾配降下法またはアダムを選択する可能性があります）、より多くのエポックをトレーニングします。相関関係の解釈に関する簡単なメモ：·       

* 相関関係は、必ずしも因果関係ではなく、関連性の証拠を示します。
* 相関は外れ値に敏感であり、特に試行されたハイパーパラメータのサンプルサイズが小さい場合、強い関係が中程度の関係に変えられる可能性があります。
* そして最後に、相関はハイパーパラメータとメトリックの間の線形関係のみをキャプチャします。

強い多項式関係がある場合、それは相関によってキャプチャされません。重要度と相関関係の不一致は、重要度がハイパーパラメータ間の相互作用を説明するという事実に起因しますが、相関関係は、メトリック値に対する個々のハイパーパラメータの影響のみを測定します。

第二に、相関は線形関係のみをキャプチャしますが、重要度はより複雑な関係をキャプチャできます。ご覧のとおり、重要性と相関の両方が、ハイパーパラメータがモデルのパフォーマンスにどのように影響するかを理解するための強力なツールです。このパネルが、これらの洞察を捉え、強力なモデルにすばやく焦点を当てるのに役立つことを願っています。

